USE MASTER

CREATE DATABASE GuitarPartsReview

USE GuitarPartsReview

CREATE TABLE DBO.Company
(Company_ID CHAR(5) NOT NULL,
Name CHAR(21)NOT NULL)

ALTER TABLE DBO.Company
ADD CONSTRAINT PK_Company PRIMARY KEY CLUSTERED (Company_ID)

CREATE TABLE DBO.Parts
(Part_ID CHAR(7) NOT NULL,
PartName CHAR(36) NOT NULL,
Company_ID CHAR(5) NOT NULL)

ALTER TABLE DBO.Parts
ADD CONSTRAINT PK_Part PRIMARY KEY CLUSTERED
(Part_ID)

ALTER TABLE DBO.Parts
ADD CONSTRAINT FK_Company_Parts
FOREIGN KEY (Company_ID)
REFERENCES DBO.Company(Company_ID)

CREATE TABLE DBO.Necks
(Neck_ID CHAR(5) NOT NULL,
NeckWoodType CHAR(36) NOT NULL,
FretWoodType CHAR (36) NOT NULL,
NeckShape CHAR (18) NOT NULL,
NeckRadius CHAR (18) NOT NULL,
Part_ID CHAR (7) NOT NULL)

CREATE INDEX INDEX_NeckBuild
ON Necks (NeckWoodType,FretWoodType)

ALTER TABLE DBO.Necks
ADD CONSTRAINT PK_Neck PRIMARY KEY CLUSTERED
(Neck_ID, NeckWoodType, FretWoodType, NeckShape, NeckRadius,Part_ID)

ALTER TABLE DBO.Necks
ADD CONSTRAINT FK_Neck_Part
FOREIGN KEY (Part_ID)
REFERENCES DBO.Parts(Part_ID)

CREATE TABLE DBO.TuningPegs
(Tuner_ID CHAR(5) NOT NULL,
TunerName CHAR(36) NOT NULL,
TunerType CHAR (36) NOT NULL,
TunerMaterial CHAR (18) NOT NULL,
Part_ID CHAR (7) NOT NULL)

ALTER TABLE DBO.TuningPegs
ADD CONSTRAINT PK_TuningPeg PRIMARY KEY CLUSTERED
(Tuner_ID,TunerName,TunerType,TunerMaterial,Part_ID)

ALTER TABLE DBO.TuningPegs
ADD CONSTRAINT FK_TuningPeg_Part
FOREIGN KEY (Part_ID)
REFERENCES DBO.Parts(Part_ID)

CREATE TABLE DBO.Bridges
(Bridge_ID CHAR(5) NOT NULL,
BridgeName CHAR(36) NOT NULL,
BridgeType CHAR (36) NOT NULL,
Part_ID CHAR (7) NOT NULL)

ALTER TABLE DBO.Bridges
ADD CONSTRAINT PK_Bridge PRIMARY KEY CLUSTERED
(Bridge_ID,BridgeName,BridgeType,Part_ID)

ALTER TABLE DBO.Bridges
ADD CONSTRAINT FK_Bridge_Part
FOREIGN KEY (Part_ID)
REFERENCES DBO.Parts(Part_ID)

CREATE TABLE DBO.PickUps
(PickUp_ID CHAR(5) NOT NULL,
PickUpName CHAR(36) NOT NULL,
PickUpType CHAR (36) NOT NULL,
PickUpMaterial CHAR (18) NOT NULL,
PickUpConfig CHAR (18) NOT NULL,
Part_ID CHAR (7) NOT NULL)

CREATE INDEX INDEX_PickUp_Pairs
ON PickUps (PickUpType,PickUpConfig)

ALTER TABLE DBO.PickUps
ADD CONSTRAINT PK_PickUp PRIMARY KEY CLUSTERED
(PickUp_ID,PickUpName,PickUpType,PickUpMaterial,PickUpConfig,Part_ID)

ALTER TABLE DBO.PickUps
ADD CONSTRAINT FK_PickUp_Part
FOREIGN KEY (Part_ID)
REFERENCES DBO.Parts(Part_ID)

CREATE TABLE DBO.PickGuards
(PickGuard_ID CHAR(5) NOT NULL,
GuardType CHAR(36) NOT NULL,
GuardMaterial CHAR (36) NOT NULL,
GuardPly CHAR (18) NOT NULL,
Part_ID CHAR (7) NOT NULL)

ALTER TABLE DBO.PickGuards
ADD CONSTRAINT PK_PickGuard PRIMARY KEY CLUSTERED
(PickGuard_ID,GuardType,GuardMaterial,GuardPly,Part_ID)

ALTER TABLE DBO.PickGuards
ADD CONSTRAINT FK_PickGuard_Part
FOREIGN KEY (Part_ID)
REFERENCES DBO.Parts(Part_ID)

CREATE TABLE DBO.Body
(Body_ID CHAR(5) NOT NULL,
BodyType CHAR(36) NOT NULL,
WoodType CHAR (36) NOT NULL,
Part_ID CHAR (7) NOT NULL)

ALTER TABLE DBO.Body
ADD CONSTRAINT PK_Body PRIMARY KEY CLUSTERED
(Body_ID,BodyType,WoodType,Part_ID)

ALTER TABLE DBO.Body
ADD CONSTRAINT FK_Body_Part
FOREIGN KEY (Part_ID)
REFERENCES DBO.Parts(Part_ID)

CREATE TABLE DBO.Reviewers
(Reviewer_ID CHAR(5) NOT NULL,
Username CHAR(12) NOT NULL,
Password CHAR (12) NOT NULL)

ALTER TABLE DBO.Reviewers
ADD CONSTRAINT PK_Reviewer PRIMARY KEY CLUSTERED
(Reviewer_ID)

CREATE TABLE DBO.PartReviews
(Review_ID CHAR(5) NOT NULL,
 Rating CHAR(1) NOT NULL, CONSTRAINT CHK_PartReviews CHECK (Rating IN 
 ('1','2','3','4','5')),
 Comment CHAR(1000) NOT NULL,
Part_ID CHAR (7) NOT NULL,
Neck_ID CHAR (5) NOT NULL,
Tuner_ID CHAR (5) NOT NULL,
Body_ID CHAR (5) NOT NULL,
PickGuard_ID CHAR (5) NOT NULL,
PickUp_ID CHAR (5) NOT NULL,
Bridge_ID CHAR (5) NOT NULL,
Reviewer_ID CHAR (5) NOT NULL,
)

ALTER TABLE DBO.PartReviews
ADD CONSTRAINT PK_Reviews PRIMARY KEY CLUSTERED
(Review_ID,Rating,Part_ID,Neck_ID,Tuner_ID,Body_ID,PickGuard_ID, PickUp_ID,Bridge_ID,Reviewer_ID)

ALTER TABLE DBO.PartReviews
ADD CONSTRAINT FK_Parts_Reviewed
FOREIGN KEY (Part_ID)
REFERENCES DBO.Parts(Part_ID),

FOREIGN KEY(Neck_ID)
REFERENCES DBO.Necks(Neck_ID),

FOREIGN KEY(Tuner_ID)
REFERENCES DBO.TuningPegs(Tuner_ID),

FOREIGN KEY(Body_ID)
REFERENCES DBO.Body(Body_ID),

FOREIGN KEY(PickGuard_ID)
REFERENCES DBO.PickGuards(PickGuard_ID),

FOREIGN KEY(PickUp_ID)
REFERENCES DBO.PickUps(PickUp_ID),

FOREIGN KEY(Bridge_ID)
REFERENCES DBO.Bridges(Bridge_ID),

FOREIGN KEY(Reviewer_ID)
REFERENCES DBO.Reviewers(Reviewer_ID)













